{"version":3,"sources":["../../../../src/schema/type/array/index.js"],"names":["defaultArrKey","el","i","Schema","Type","array","getPath","schema","value","path","key","rest","elKey","targetEl","find","element","get","data","set","map","validate","minSize","length","message","maxSize","reduce","out","forEach","push"],"mappings":"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","sourcesContent":["import { Schema } from '../../schema';\n\nconst defaultArrKey = (el, i) => i;\n\nSchema.Type.array = {\n\tgetPath: (schema, value, path) => {\n\t\tconst [key, ...rest] = path;\n\t\tconst elKey = schema.key || defaultArrKey;\n\t\tconst targetEl = (value || []).find((el, i) => elKey(el, i) === key);\n\t\treturn Schema.getPath(schema.element, targetEl, rest);\n\t},\n\tget: (schema, data, path) => {\n\t\tconst [key, ...rest] = path;\n\t\tconst elKey = schema.key || defaultArrKey;\n\t\tconst targetEl = (data || []).find((el, i) => elKey(el, i) === key);\n\t\treturn Schema.get(schema.element, targetEl, rest);\n\t},\n\tset: (schema, data, path, value) => {\n\t\tconst [key, ...rest] = path;\n\t\tconst elKey = schema.key || defaultArrKey;\n\t\treturn data.map((el, i) => elKey(el, i) === key ? Schema.set(schema.element, el, rest, value) : el);\n\t},\n\tvalidate: {\n\t\tminSize: (minSize, data = []) => data.length >= minSize ? [] : [{\n\t\t\tmessage: `Cannot have fewer than ${ minSize } elements`\n\t\t}],\n\t\tmaxSize: (maxSize, data = []) => data.length <= maxSize ? [] : [{\n\t\t\tmessage: `Cannot have more than ${ maxSize } elements`\n\t\t}],\n\t\telement: (element, data = []) => {\n\t\t\treturn data\n\t\t\t\t.reduce((out, el, i) => {\n\t\t\t\t\tSchema\n\t\t\t\t\t\t.validate(element, el)\n\t\t\t\t\t\t.forEach(({ message, path = [] }) => {\n\t\t\t\t\t\t\tout.push({\n\t\t\t\t\t\t\t\tpath: [i, ...path],\n\t\t\t\t\t\t\t\tmessage\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\treturn out;\n\t\t\t\t}, []);\n\t\t},\n\t\tvalidate: (validate, data) => validate(data)\n\t}\n};\n\n\n"],"file":"index.js"}